<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Sign Up | WestWave</title>
    <link rel="stylesheet" href="index.css">
</head>
<body>
    <div class="wrapper">
        <div class="card-switch">
            <label class="switch">
                <input type="checkbox" class="toggle">
                <span class="slider"></span>
                <span class="card-side"></span>
                <div class="flip-card__inner">
                    <!-- Log In Section -->
                    <div class="flip-card__front">
                        <div class="title">Log in</div>
                        <form class="flip-card__form" onsubmit="redirectToLoader(event)">
                            <input class="flip-card__input" id="login-email" placeholder="Email" type="email" required>
                            <input class="flip-card__input" id="login-password" placeholder="Password" type="password" required>
                            <button class="flip-card__btn" type="submit">Go!</button>
                        </form>
                    </div>
                    <!-- Sign Up Section -->
                    <div class="flip-card__back">
                        <div class="title">Sign up</div>
                        <form class="flip-card__form" onsubmit="registerUser(event)">
                            <input class="flip-card__input" id="signup-name" placeholder="Name" type="text" required>
                            <input class="flip-card__input" id="signup-email" placeholder="Email" type="email" required>
                            <input class="flip-card__input" id="signup-password" placeholder="Password" type="password" required>
                            <button class="flip-card__btn" type="submit">Confirm!</button>
                        </form>
                    </div>
                </div>
            </label>
        </div>   
    </div>

    <script>
        // Check if user is already logged in
        window.onload = function() {
            const loggedInEmail = localStorage.getItem("loggedInEmail");

            // If user is already logged in, redirect to loader page
            if (loggedInEmail) {
                window.location.href = "loader.html"; // Redirect to loader page if logged in
            }
        }

        // Log In and Save to LocalStorage
        function redirectToLoader(event) {
            event.preventDefault(); // Prevent form submission

            const email = document.getElementById("login-email").value;
            const password = document.getElementById("login-password").value;

            // Check if the email and password match saved credentials (can be extended to use real authentication)
            const storedEmail = localStorage.getItem("registeredEmail");
            const storedPassword = localStorage.getItem("registeredPassword");

            if (email === storedEmail && password === storedPassword) {
                // Save login info in localStorage
                localStorage.setItem("loggedInEmail", email);

                // Redirect to loader page
                window.location.href = "loader.html"; 
            } else {
                alert("Invalid email or password");
            }
        }

        // Sign Up and Save to LocalStorage
        function registerUser(event) {
            event.preventDefault(); // Prevent form submission

            const name = document.getElementById("signup-name").value;
            const email = document.getElementById("signup-email").value;
            const password = document.getElementById("signup-password").value;

            // Store registration info in localStorage
            localStorage.setItem("registeredName", name);
            localStorage.setItem("registeredEmail", email);
            localStorage.setItem("registeredPassword", password);

            // Redirect to login page (or another page)
            alert("You are successfully registered!");
            document.querySelector("input.toggle").checked = true; // Switch to login form after registration
        }
    </script>
</body>
</html>
